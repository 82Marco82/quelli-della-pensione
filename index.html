<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quelli della pensione</title>

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
/* ===== BASE ===== */
:root{
  --bg:#f4f6f8; --card:#fff; --text:#111827; --muted:#6b7280;
  --border:#e5e7eb; --shadow:0 6px 20px rgba(0,0,0,.08);
  --pill:#eee; --logo1:#111; --logo2:#333; --btn:#111;
}
body.dark{
  --bg:#0f1115; --card:#171a21; --text:#e5e7eb; --muted:#a1a1aa;
  --border:#2a2f3a; --shadow:0 10px 28px rgba(0,0,0,.45);
  --pill:#222631; --logo1:#0b0e14; --logo2:#2a3242; --btn:#0b0e14;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter;background:var(--bg);color:var(--text)}
.wrap{max-width:760px;margin:auto;padding:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:var(--shadow);margin:12px 0}
.header{text-align:center}

/* ===== LOGO ===== */
.logo{
  width:80px;height:80px;border-radius:50%;
  background:linear-gradient(135deg,var(--logo1),var(--logo2));
  margin:auto;display:flex;align-items:center;justify-content:center;
  color:#fff;font-family:'Bebas Neue';font-size:34px;cursor:pointer
}
.logo.spin{animation:spin 900ms}
@keyframes spin{0%{transform:rotateY(0)}50%{transform:rotateY(180deg)}100%{transform:rotateY(360deg)}}

h1{font-family:'Bebas Neue';font-size:48px;margin:10px 0 0}
.subtitle{color:var(--muted);font-size:14px}

/* ===== HERO ===== */
.heroImgWrap{border-radius:16px;overflow:hidden}
.heroImgWrap img{width:100%;max-height:360px;object-fit:cover}
.heroCaption{text-align:center;font-family:'Bebas Neue';font-size:26px;margin-top:10px}

/* ===== UI ===== */
.pill{display:inline-block;padding:6px 12px;border-radius:999px;font-weight:900;border:1px solid var(--border);background:var(--pill)}
.muted{color:var(--muted)}
.badge{background:#111;color:#fff;padding:6px 12px;border-radius:999px;font-weight:900}
body.dark .badge{background:#0b0e14}

/* ===== RESULT GRAPHIC ===== */
.resultBox{
  margin:14px 0;
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-family:'Bebas Neue';
}
.resultCenter{text-align:center}
.resultScore{font-size:46px;font-weight:900}
.qdpBall{
  width:48px;height:48px;border-radius:50%;
  background:linear-gradient(135deg,var(--logo1),var(--logo2));
  color:#fff;display:flex;align-items:center;justify-content:center;
  font-weight:900;margin:6px auto 0
}

/* ===== FAB ===== */
.fab{position:fixed;right:16px;bottom:16px;width:54px;height:54px;border-radius:50%;border:1px solid var(--border);background:var(--card);cursor:pointer}
</style>
</head>

<body>
<div class="wrap">

<div class="header">
  <div id="logoCoin" class="logo">QDP</div>
  <h1>Quelli della pensione</h1>
  <div class="subtitle">Ogni maledetto gioved√¨ ‚Ä¢ Ore 21</div>
</div>

<div class="card">
  <div class="heroImgWrap"><img src="foto.jpg"></div>
  <div class="heroCaption">OGNI MALEDETTO GIOVED√å</div>
</div>

<div class="card">
  <div id="status" class="muted">Caricamento‚Ä¶</div>

  <!-- STATO PARTITA -->
  <div id="matchState" class="pill" style="display:none;text-align:center;margin-bottom:10px"></div>

  <!-- RISULTATO -->
  <div id="resultGraphic" style="display:none">
    <div class="resultBox">
      <div style="flex:1;text-align:center">SQUADRA A</div>
      <div class="resultCenter">
        <div id="bigResult" class="resultScore">‚Äî</div>
        <div class="qdpBall">QDP</div>
        <div class="pill" style="margin-top:8px">üèÅ PARTITA TERMINATA</div>
      </div>
      <div style="flex:1;text-align:center">SQUADRA B</div>
    </div>
  </div>
</div>

</div>

<button id="themeToggle" class="fab">üåô</button>

<script src="config.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

<script>
const themeBtn=document.getElementById("themeToggle");
themeBtn.onclick=()=>document.body.classList.toggle("dark");

const logo=document.getElementById("logoCoin");
logo.onclick=()=>{logo.classList.remove("spin");void logo.offsetWidth;logo.classList.add("spin")}

const client=supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);

const statusEl=document.getElementById("status");
const matchState=document.getElementById("matchState");
const resultGraphic=document.getElementById("resultGraphic");
const bigResult=document.getElementById("bigResult");

async function load(){
  const {data}=await client.from("matches")
    .select("score_a,score_b")
    .order("match_date",{ascending:false}).limit(1);

  if(!data||!data.length){
    statusEl.textContent="Nessuna partita creata";
    return;
  }

  const m=data[0];
  const played=(m.score_a!=null && m.score_b!=null);

  if(!played){
    matchState.style.display="block";
    matchState.textContent="‚è≥ PARTITA IN PROGRAMMA";
    resultGraphic.style.display="none";
  }else{
    matchState.style.display="none";
    resultGraphic.style.display="block";
    bigResult.textContent=`${m.score_a}-${m.score_b}`;
  }
}
load();
</script>

</body>
</html>
